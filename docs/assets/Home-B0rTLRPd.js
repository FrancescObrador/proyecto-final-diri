import{r as n,u as h,a as m,b as f,j as e,M as c,c as v,s as w,L as b,f as N,C as q}from"./index-D2o7tSFI.js";const y=({onDelete:s})=>e.jsxs("div",{className:"dropdown dropdown-left",children:[e.jsx("label",{tabIndex:0,className:"btn btn-ghost btn-xs btn-circle m-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01"})})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-40",children:e.jsx("li",{children:e.jsxs("button",{onClick:s,className:"text-error hover:bg-error/10",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx(c,{id:"delete"})]})})})]}),M=n.memo(({media:s})=>{const t=h(),[i,d]=n.useState(!1),o=n.useRef(null),l=n.useCallback(a=>{const r={id:s.id,seen:a,seenAt:a?Date.now():null,addedAt:s.addedAt,platform:s.platform||"Otros",media_type:s.media_type};t(m(r))},[t,s.id,s.addedAt,s.platform,s.media_type]),p=n.useCallback(a=>{const r={id:s.id,seen:s.seen,seenAt:s.seenAt||null,addedAt:s.addedAt,platform:a,media_type:s.media_type};t(m(r))},[t,s.id,s.seen,s.seenAt,s.addedAt,s.media_type]),u=n.useCallback(()=>{window.confirm("¿Eliminar este elemento de tu lista?")&&t(f(s.id))},[t,s.id]),x=s.media_type==="tv"?s.name:s.title,g=s.media_type==="tv"?new Date(s.first_air_date).toLocaleDateString("es-ES",{year:"numeric"}):new Date(s.release_date).toLocaleDateString("es-ES",{year:"numeric"}),j=new Date(s.seenAt).toLocaleDateString();return n.useEffect(()=>{const a=o.current;a!=null&&a.complete&&d(!0)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[!i&&e.jsx("div",{className:"skeleton w-12 md:w-22"}),e.jsx("img",{ref:o,className:`w-12 md:w-22 rounded-xl transition-all duration-300 ${s.seen?"brightness-50":""} ${i?"":"hidden"}`,src:`https://image.tmdb.org/t/p/w200${s.poster_path}`,onLoad:()=>d(!0),alt:x})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex flex-row items-center space-x-2",children:[e.jsx("h1",{className:"text text-xs md:text-xl font-semibold truncate",children:x}),s.seen&&e.jsx("span",{className:"invisible md:visible badge badge-accent badge-xs md:badge-sm",children:j})]}),e.jsx("div",{className:"text uppercase font-semibold opacity-60",children:e.jsx("div",{className:"flex gap-2",children:g})}),e.jsxs("div",{className:"text uppercase font-semibold opacity-60",children:[s.vote_average.toFixed(1)," ⭐"]}),e.jsx("div",{className:"hidden md:flex space-x-1",children:s.genres.map((a,r)=>e.jsx("div",{className:"badge badge-sm badge-outline badge-secondary",children:a.name},r))})]}),e.jsxs("div",{className:"flex flex-col space-y-4 items-end",children:[e.jsx(y,{onDelete:u}),e.jsx("div",{className:"flex gap-2 items-start",children:e.jsxs("label",{className:"swap swap-rotate cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.seen,onChange:a=>l(a.target.checked)}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"swap-on size-8 fill-current",viewBox:"0 -960 960 960",fill:"#e3e3e3",children:e.jsx("path",{d:"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q65 0 123 19t107 53l-58 59q-38-24-81-37.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160q133 0 226.5-93.5T800-480q0-18-2-36t-6-35l65-65q11 32 17 66t6 70q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm-56-216L254-466l56-56 114 114 400-401 56 56-456 457Z"})}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"swap-off size-8 fill-current",viewBox:"0 -960 960 960",fill:"#e3e3e3",children:e.jsx("path",{d:"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})})]})}),e.jsxs("select",{className:`select cursor-pointer select-xs md:select-md w-22 md:w-auto ${s.seen?"flex":"hidden"}`,value:s.platform||"Otros",onChange:a=>p(a.target.value),children:[e.jsx("option",{disabled:!0,value:"",children:e.jsx(c,{id:"platform"})}),e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Amazon Prime",children:"Amazon Prime"}),e.jsx("option",{value:"HBO Max",children:"HBO Max"}),e.jsx("option",{value:"Disney+",children:"Disney+"}),e.jsx("option",{value:"Cine",children:"Cine"}),e.jsx("option",{value:"Otros",children:"Otra"})]})]})]})},(s,t)=>s.media.id===t.media.id&&s.media.seen===t.media.seen&&s.media.platform===t.media.platform&&s.media.poster_path===t.media.poster_path&&s.media.genres===t.media.genres),T=n.memo(()=>{const s=h(),{media:t,loading:i,error:d}=v(l=>({media:l.media.media,loading:l.media.loading,error:l.media.error}),w),{locale:o}=n.useContext(b);return n.useEffect(()=>{s(N())},[s,o]),i?e.jsx(q,{messages:["Writing the scripts...","Filming the movies..."]}):d?e.jsx("div",{className:"text-center p-4 text-error",children:e.jsx(c,{id:"error-fetching-media"})}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"text-center p-4",children:e.jsx("p",{className:"text-xl",children:e.jsx(c,{id:"movies-empty"})})}):e.jsx("ul",{className:"list bg-base-100 rounded-box shadow-xl m-4",children:t.map(l=>e.jsx("li",{className:"list-row",children:e.jsx(M,{media:l})},`${l.id}-${l.media_type}`))})})}),L=()=>e.jsx(e.Fragment,{children:e.jsx(T,{})});export{L as default};
