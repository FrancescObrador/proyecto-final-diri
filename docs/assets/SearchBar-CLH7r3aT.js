import{r as l,u as ee,j as x,m as F,l as te,e as ne}from"./index-D2o7tSFI.js";var O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function re(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var C,A;function ae(){if(A)return C;A=1;var n="Expected a function",a=NaN,c="[object Symbol]",i=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,d=/^0o[0-7]+$/i,p=parseInt,y=typeof O=="object"&&O&&O.Object===Object&&O,S=typeof self=="object"&&self&&self.Object===Object&&self,t=y||S||Function("return this")(),m=Object.prototype,R=m.toString,G=Math.max,U=Math.min,M=function(){return t.Date.now()};function H(e,o,b){var v,w,D,j,f,h,E=0,V=!1,T=!1,N=!0;if(typeof e!="function")throw new TypeError(n);o=B(o)||0,L(b)&&(V=!!b.leading,T="maxWait"in b,D=T?G(B(b.maxWait)||0,o):D,N="trailing"in b?!!b.trailing:N);function $(r){var g=v,_=w;return v=w=void 0,E=r,j=e.apply(_,g),j}function J(r){return E=r,f=setTimeout(I,o),V?$(r):j}function K(r){var g=r-h,_=r-E,W=o-g;return T?U(W,D-_):W}function q(r){var g=r-h,_=r-E;return h===void 0||g>=o||g<0||T&&_>=D}function I(){var r=M();if(q(r))return P(r);f=setTimeout(I,K(r))}function P(r){return f=void 0,N&&v?$(r):(v=w=void 0,j)}function Y(){f!==void 0&&clearTimeout(f),E=0,v=h=w=f=void 0}function Z(){return f===void 0?j:P(M())}function k(){var r=M(),g=q(r);if(v=arguments,w=this,h=r,g){if(f===void 0)return J(h);if(T)return f=setTimeout(I,o),$(h)}return f===void 0&&(f=setTimeout(I,o)),j}return k.cancel=Y,k.flush=Z,k}function L(e){var o=typeof e;return!!e&&(o=="object"||o=="function")}function X(e){return!!e&&typeof e=="object"}function z(e){return typeof e=="symbol"||X(e)&&R.call(e)==c}function B(e){if(typeof e=="number")return e;if(z(e))return a;if(L(e)){var o=typeof e.valueOf=="function"?e.valueOf():e;e=L(o)?o+"":o}if(typeof e!="string")return e===0?e:+e;e=e.replace(i,"");var b=s.test(e);return b||d.test(e)?p(e.slice(2),b?2:8):u.test(e)?a:+e}return C=H,C}var oe=ae();const Q=re(oe);function ie(n){const a=l.useRef(n);a.current=n,l.useEffect(()=>()=>{a.current()},[])}function se(n,a=500,c){const i=l.useRef();ie(()=>{i.current&&i.current.cancel()});const u=l.useMemo(()=>{const s=Q(n,a,c),d=(...p)=>s(...p);return d.cancel=()=>{s.cancel()},d.isPending=()=>!!i.current,d.flush=()=>s.flush(),d},[n,a,c]);return l.useEffect(()=>{i.current=Q(n,a,c)},[n,a,c]),u}function ce(n,a,c){const i=(S,t)=>S===t,u=n instanceof Function?n():n,[s,d]=l.useState(u),p=l.useRef(u),y=se(d,a,c);return i(p.current,u)||(y(u),p.current=u),[s,y]}const fe=()=>{const[n,a]=l.useState(""),[c,i]=l.useState([]),u=ee(),[s,d]=ce("",300);l.useEffect(()=>{(async()=>{if(s)try{const m=await F.searchMedia(s);i(m.results)}catch{te.error("Error searching:"+s),i([])}else i([])})()},[s]);const p=async t=>{const m=t.target.value;a(m),d(m)},y=async(t,m)=>{let R=m==="tv"?await F.getTVDetails(t):await F.getMovieDetails(t);u(ne(R)),i([]),a("")},S=()=>{i([]),a("")};return x.jsxs("div",{className:"form-control relative",children:[x.jsx("input",{type:"text",value:n,onChange:p,onBlur:S,placeholder:"Search",className:"input input-bordered w-auto md:w-128"}),c.length>0&&x.jsx("ul",{className:"absolute top-full mt-1 w-full bg-base-100 border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:c.map(t=>((t.title||t.name)&&t.release_date||t.first_air_date)&&x.jsxs("li",{onMouseDown:()=>y(t.id,t.media_type),className:"flex flex-row items-center p-2 space-x-2 hover:bg-base-200 cursor-pointer",children:[x.jsx("img",{src:`https://image.tmdb.org/t/p/w200${t.poster_path}`,className:"w-10 h-15"}),x.jsx("p",{children:t.media_type==="tv"?`${t.name} - ${new Date(t.first_air_date).toLocaleDateString("es-ES",{year:"numeric"})}`:`${t.title} - ${new Date(t.release_date).toLocaleDateString("es-ES",{year:"numeric"})}`})]},t.id))})]})};export{fe as default};
