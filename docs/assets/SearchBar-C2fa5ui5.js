import{e as R,g as ee,r as l,u as te,j,m as F,l as ne,h as re}from"./index-CCNVTeMf.js";var C,P;function ae(){if(P)return C;P=1;var a="Expected a function",r=NaN,i="[object Symbol]",c=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,d=/^0o[0-7]+$/i,p=parseInt,y=typeof R=="object"&&R&&R.Object===Object&&R,S=typeof self=="object"&&self&&self.Object===Object&&self,t=y||S||Function("return this")(),m=Object.prototype,O=m.toString,G=Math.max,U=Math.min,L=function(){return t.Date.now()};function H(e,s,b){var v,E,w,x,f,g,D=0,V=!1,T=!1,N=!0;if(typeof e!="function")throw new TypeError(a);s=B(s)||0,M(b)&&(V=!!b.leading,T="maxWait"in b,w=T?G(B(b.maxWait)||0,s):w,N="trailing"in b?!!b.trailing:N);function $(n){var h=v,_=E;return v=E=void 0,D=n,x=e.apply(_,h),x}function J(n){return D=n,f=setTimeout(I,s),V?$(n):x}function K(n){var h=n-g,_=n-D,A=s-h;return T?U(A,w-_):A}function q(n){var h=n-g,_=n-D;return g===void 0||h>=s||h<0||T&&_>=w}function I(){var n=L();if(q(n))return W(n);f=setTimeout(I,K(n))}function W(n){return f=void 0,N&&v?$(n):(v=E=void 0,x)}function Y(){f!==void 0&&clearTimeout(f),D=0,v=g=E=f=void 0}function Z(){return f===void 0?x:W(L())}function k(){var n=L(),h=q(n);if(v=arguments,E=this,g=n,h){if(f===void 0)return J(g);if(T)return f=setTimeout(I,s),$(g)}return f===void 0&&(f=setTimeout(I,s)),x}return k.cancel=Y,k.flush=Z,k}function M(e){var s=typeof e;return!!e&&(s=="object"||s=="function")}function X(e){return!!e&&typeof e=="object"}function z(e){return typeof e=="symbol"||X(e)&&O.call(e)==i}function B(e){if(typeof e=="number")return e;if(z(e))return r;if(M(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=M(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=e.replace(c,"");var b=o.test(e);return b||d.test(e)?p(e.slice(2),b?2:8):u.test(e)?r:+e}return C=H,C}var se=ae();const Q=ee(se);function ce(a){const r=l.useRef(a);r.current=a,l.useEffect(()=>()=>{r.current()},[])}function oe(a,r=500,i){const c=l.useRef();ce(()=>{c.current&&c.current.cancel()});const u=l.useMemo(()=>{const o=Q(a,r,i),d=(...p)=>o(...p);return d.cancel=()=>{o.cancel()},d.isPending=()=>!!c.current,d.flush=()=>o.flush(),d},[a,r,i]);return l.useEffect(()=>{c.current=Q(a,r,i)},[a,r,i]),u}function ie(a,r,i){const c=(S,t)=>S===t,u=a instanceof Function?a():a,[o,d]=l.useState(u),p=l.useRef(u),y=oe(d,r,i);return c(p.current,u)||(y(u),p.current=u),[o,y]}const fe=()=>{const[a,r]=l.useState(""),[i,c]=l.useState([]),u=te(),[o,d]=ie("",300);l.useEffect(()=>{(async()=>{if(o)try{const m=await F.searchMedia(o);c(m.results)}catch{ne.error("Error searching:"+o),c([])}else c([])})()},[o]);const p=async t=>{const m=t.target.value;r(m),d(m)},y=async(t,m)=>{let O=m==="tv"?await F.getTVDetails(t):await F.getMovieDetails(t);u(re(O)),c([]),r("")},S=()=>{c([]),r("")};return j.jsxs("div",{className:"form-control relative",children:[j.jsx("input",{type:"text",value:a,onChange:p,onBlur:S,placeholder:"Search",className:"input input-bordered w-auto md:w-128"}),i.length>0&&j.jsx("ul",{className:"absolute top-full mt-1 w-full bg-base-100 border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:i.map(t=>((t.title||t.name)&&t.release_date||t.first_air_date)&&j.jsxs("li",{onMouseDown:()=>y(t.id,t.media_type),className:"flex flex-row items-center p-2 space-x-2 hover:bg-base-200 cursor-pointer",children:[j.jsx("img",{src:`https://image.tmdb.org/t/p/w200${t.poster_path}`,className:"w-10 h-15"}),j.jsx("p",{children:t.media_type==="tv"?`${t.name} - ${new Date(t.first_air_date).toLocaleDateString("es-ES",{year:"numeric"})}`:`${t.title} - ${new Date(t.release_date).toLocaleDateString("es-ES",{year:"numeric"})}`})]},t.id))})]})};export{fe as default};
